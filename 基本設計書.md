# プロジェクト管理ツール 基本設計書

## 1. システム概要

### 1.1 システム構成
- **アーキテクチャ**: フロントエンド単体アプリケーション
- **データ保存**: LocalStorage（将来的にデータベース移行を考慮）
- **グラフ表示**: Chart.js
- **レスポンシブ対応**: CSS Grid + Flexbox

### 1.2 技術スタック
- **フロントエンド**: HTML5, CSS3, JavaScript (ES6+)
- **UIフレームワーク**: カスタムCSS（Tailwind CSS風のユーティリティクラス）
- **グラフライブラリ**: Chart.js
- **アイコン**: Font Awesome または Material Icons
- **フォント**: Google Fonts（Noto Sans JP）

## 2. 機能設計

### 2.1 プロジェクト管理機能

#### 2.1.1 プロジェクト作成
- **入力項目**:
  - プロジェクト名（必須、最大100文字）
  - 説明（任意、最大500文字）
  - 開始日（必須、日付形式）
  - 期限（必須、日付形式）
  - 予算（必須、数値形式）
- **バリデーション**:
  - 開始日 < 期限
  - 予算 > 0
- **データ構造**:
```javascript
{
  id: "uuid",
  name: "string",
  description: "string",
  startDate: "ISO date string",
  endDate: "ISO date string",
  budget: "number",
  status: "planned|in-progress|completed|on-hold",
  createdAt: "ISO date string",
  updatedAt: "ISO date string"
}
```

#### 2.1.2 プロジェクト編集・削除
- **編集**: 全項目の更新可能
- **削除**: 関連タスクも含めて削除（確認ダイアログ表示）

#### 2.1.3 プロジェクト一覧表示
- **表示項目**: プロジェクト名、ステータス、進捗率、期限、予算
- **フィルタリング**: ステータス別、期限別
- **ソート**: 作成日順、期限順、予算順

### 2.2 タスク管理機能

#### 2.2.1 タスク作成
- **入力項目**:
  - タスク名（必須、最大100文字）
  - 説明（任意、最大500文字）
  - 優先度（必須、高/中/低）
  - 期限（必須、日付形式）
  - 予想工数（必須、時間単位）
  - プロジェクトID（必須）
- **データ構造**:
```javascript
{
  id: "uuid",
  projectId: "uuid",
  name: "string",
  description: "string",
  priority: "high|medium|low",
  dueDate: "ISO date string",
  estimatedHours: "number",
  actualHours: "number",
  status: "pending|in-progress|completed",
  createdAt: "ISO date string",
  updatedAt: "ISO date string"
}
```

#### 2.2.2 タスク編集・削除
- **編集**: 全項目の更新可能
- **削除**: 確認ダイアログ表示

#### 2.2.3 タスク一覧表示
- **表示項目**: タスク名、優先度、期限、予想工数、実際工数、ステータス
- **フィルタリング**: プロジェクト別、優先度別、ステータス別

### 2.3 進捗管理機能

#### 2.3.1 ガントチャート表示
- **表示内容**: プロジェクト・タスクの期間表示
- **機能**: ドラッグ&ドロップでの期間変更
- **ライブラリ**: Chart.js または DHTMLX Gantt

#### 2.3.2 進捗率計算
- **計算式**: 完了タスク数 / 全タスク数 × 100
- **表示**: プログレスバー + 数値表示

#### 2.3.3 タイムトラッキング
- **工数記録**: タスク完了時の実際工数入力
- **分析**: 予想工数 vs 実際工数の差異表示

### 2.4 分析・レポート機能

#### 2.4.1 ダッシュボード
- **表示内容**:
  - プロジェクト数（ステータス別）
  - 期限が近いタスク（3日以内）
  - 全体進捗率
  - 予算使用率

#### 2.4.2 予算管理
- **支出記録**:
  - 日付、金額、項目、メモ
- **予算超過警告**: 80%以上で警告、100%以上でアラート

#### 2.4.3 レポート生成
- **進捗レポート**: プロジェクト別の進捗サマリー
- **工数分析**: 予想 vs 実際の工数比較

## 3. データベース設計

### 3.1 LocalStorage構造
```javascript
// プロジェクト管理ツールのデータ構造
{
  "projects": [
    {
      "id": "uuid",
      "name": "プロジェクト名",
      "description": "説明",
      "startDate": "2024-01-01",
      "endDate": "2024-12-31",
      "budget": 1000000,
      "status": "in-progress",
      "createdAt": "2024-01-01T00:00:00Z",
      "updatedAt": "2024-01-01T00:00:00Z"
    }
  ],
  "tasks": [
    {
      "id": "uuid",
      "projectId": "project-uuid",
      "name": "タスク名",
      "description": "説明",
      "priority": "high",
      "dueDate": "2024-06-30",
      "estimatedHours": 8,
      "actualHours": 0,
      "status": "pending",
      "createdAt": "2024-01-01T00:00:00Z",
      "updatedAt": "2024-01-01T00:00:00Z"
    }
  ],
  "expenses": [
    {
      "id": "uuid",
      "projectId": "project-uuid",
      "date": "2024-01-15",
      "amount": 50000,
      "item": "機材購入",
      "memo": "開発用PC",
      "createdAt": "2024-01-15T00:00:00Z"
    }
  ],
  "settings": {
    "theme": "light",
    "language": "ja",
    "currency": "JPY"
  }
}
```

### 3.2 データ永続化
- **LocalStorage**: ブラウザローカルに保存
- **エクスポート**: JSON形式でのデータ出力
- **インポート**: JSON形式でのデータ復元

## 4. 画面設計

### 4.1 画面一覧
1. **ログイン画面**（将来的な拡張用）
2. **ダッシュボード画面**
3. **プロジェクト一覧画面**
4. **プロジェクト詳細画面**
5. **プロジェクト作成・編集画面**
6. **タスク一覧画面**
7. **タスク作成・編集画面**
8. **ガントチャート画面**
9. **レポート画面**
10. **設定画面**

### 4.2 レスポンシブデザイン
- **ブレークポイント**:
  - モバイル: 320px - 768px
  - タブレット: 768px - 1024px
  - デスクトップ: 1024px以上
- **レイアウト**: モバイルファースト設計

### 4.3 UI/UX設計原則
- **シンプル**: 必要最小限の機能に集中
- **直感的**: 操作手順を最小化
- **一貫性**: 全画面で統一されたデザイン
- **アクセシビリティ**: 色覚異常者への配慮

## 5. API設計

### 5.1 データ操作API
```javascript
// プロジェクト管理
class ProjectManager {
  create(projectData) // プロジェクト作成
  update(id, projectData) // プロジェクト更新
  delete(id) // プロジェクト削除
  getAll() // 全プロジェクト取得
  getById(id) // プロジェクト詳細取得
  getByStatus(status) // ステータス別取得
}

// タスク管理
class TaskManager {
  create(taskData) // タスク作成
  update(id, taskData) // タスク更新
  delete(id) // タスク削除
  getAll() // 全タスク取得
  getByProject(projectId) // プロジェクト別取得
  getByStatus(status) // ステータス別取得
}

// 進捗管理
class ProgressManager {
  calculateProgress(projectId) // 進捗率計算
  updateTaskStatus(taskId, status) // タスクステータス更新
  recordActualHours(taskId, hours) // 実際工数記録
}
```

### 5.2 イベント管理
```javascript
// カスタムイベント
class EventManager {
  emit(eventName, data) // イベント発火
  on(eventName, callback) // イベントリスナー登録
  off(eventName, callback) // イベントリスナー削除
}
```

## 6. セキュリティ設計

### 6.1 データ保護
- **入力値検証**: XSS対策のためのサニタイゼーション
- **データ整合性**: 必須項目のチェック
- **ローカルデータ**: ブラウザ内でのみ保存

### 6.2 将来的な拡張性
- **認証システム**: JWTトークンによる認証
- **データ暗号化**: 機密データの暗号化
- **アクセス制御**: ユーザー権限による機能制限

## 7. 技術仕様

### 7.1 パフォーマンス要件
- **ページ表示**: 3秒以内
- **データ保存**: 1秒以内
- **グラフ描画**: 2秒以内

### 7.2 ブラウザ対応
- **Chrome**: 最新版
- **Firefox**: 最新版
- **Safari**: 最新版
- **Edge**: 最新版

### 7.3 ファイル構成
```
project-management-tool/
├── index.html
├── css/
│   ├── main.css
│   ├── components.css
│   └── responsive.css
├── js/
│   ├── main.js
│   ├── models/
│   │   ├── Project.js
│   │   ├── Task.js
│   │   └── Expense.js
│   ├── managers/
│   │   ├── ProjectManager.js
│   │   ├── TaskManager.js
│   │   └── ProgressManager.js
│   ├── views/
│   │   ├── DashboardView.js
│   │   ├── ProjectView.js
│   │   └── TaskView.js
│   └── utils/
│       ├── Storage.js
│       ├── Validation.js
│       └── ChartHelper.js
└── assets/
    ├── icons/
    └── images/
```

### 7.4 開発環境
- **エディタ**: VS Code推奨
- **ライブサーバー**: 開発時のローカルサーバー
- **デバッグ**: ブラウザ開発者ツール
- **テスト**: 手動テスト + コンソールログ

## 8. 実装計画

### 8.1 フェーズ1: 基本機能
- プロジェクト管理（CRUD）
- タスク管理（CRUD）
- 基本的なUI/UX

### 8.2 フェーズ2: 進捗管理
- ガントチャート表示
- 進捗率計算
- タイムトラッキング

### 8.3 フェーズ3: 分析・レポート
- ダッシュボード
- 予算管理
- レポート生成

### 8.4 フェーズ4: 最適化
- パフォーマンス改善
- UI/UX改善
- テスト・デバッグ

## 9. リスク・課題

### 9.1 技術的リスク
- **LocalStorage容量制限**: データ量増加時の対応
- **ブラウザ互換性**: 古いブラウザでの動作保証
- **パフォーマンス**: 大量データ処理時の速度

### 9.2 対策
- **データ圧縮**: 不要データの定期的な削除
- **段階的対応**: 主要ブラウザでの動作確認
- **最適化**: データ処理アルゴリズムの改善

## 10. 成功基準

### 10.1 機能要件
- [ ] プロジェクト・タスクのCRUD操作が正常動作
- [ ] 進捗率の正確な計算・表示
- [ ] 予算管理機能の正常動作

### 10.2 非機能要件
- [ ] 3秒以内のページ表示
- [ ] レスポンシブデザインの正常動作
- [ ] 主要ブラウザでの動作確認

### 10.3 品質要件
- [ ] 直感的で使いやすいUI/UX
- [ ] エラーハンドリングの適切な実装
- [ ] コードの可読性・保守性

---
